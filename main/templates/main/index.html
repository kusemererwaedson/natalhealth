{% load static %}{% include 'main/includes/header.html' %}

<body>
    <div class="container-scroller">
        <!-- partial:partials/_navbar.html -->
        <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
            <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
                <a class="navbar-brand brand-logo mr-5" href="{% static 'index.html' %}">
                    <img class="img-fluid" style="height:10%; width: 30%;" src="{% static 'images/natal_health.jpeg' %}" class="mr-2" alt="logo">
                </a>
                <a class="navbar-brand brand-logo-mini" href="{% static 'index.html' %}">
                    <img src="{% static 'images/natal_health.jpeg' %}" alt="logo">
                </a>
            </div>
            <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
                <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
                        <span class="icon-menu"></span>
                    </button>
                <ul class="navbar-nav mr-lg-2">
                    <li class="nav-item nav-search d-none d-lg-block">
                        <div class="input-group">
                            <div class="input-group-prepend hover-cursor" id="navbar-search-icon">
                                <span class="input-group-text" id="search">
                                        <i class="icon-search"></i>
                                    </span>
                            </div>
                            <input type="text" class="form-control" id="navbar-search-input" placeholder="Search now" aria-label="search" aria-describedby="search">
                        </div>
                    </li>
                </ul>
                <ul class="navbar-nav navbar-nav-right">
                    <li class="nav-item dropdown">
                        <a class="nav-link count-indicator dropdown-toggle" id="notificationDropdown" href="#" data-toggle="dropdown">
                            <i class="icon-bell mx-0"></i>
                            <span class="count"></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="notificationDropdown">
                            <p class="mb-0 font-weight-normal float-left dropdown-header">Notifications</p>
                            <a class="dropdown-item preview-item">
                                <div class="preview-thumbnail">
                                    <div class="preview-icon bg-success">
                                        <i class="ti-info-alt mx-0"></i>
                                    </div>
                                </div>
                                <div class="preview-item-content">
                                    <h6 class="preview-subject font-weight-normal">Application Error</h6>
                                    <p class="font-weight-light small-text mb-0 text-muted">
                                        Just now
                                    </p>
                                </div>
                            </a>
                            <a class="dropdown-item preview-item">
                                <div class="preview-thumbnail">
                                    <div class="preview-icon bg-warning">
                                        <i class="ti-settings mx-0"></i>
                                    </div>
                                </div>
                                <div class="preview-item-content">
                                    <h6 class="preview-subject font-weight-normal">Settings</h6>
                                </div>
                            </a>
                            <a class="dropdown-item preview-item">
                                <div class="preview-thumbnail">
                                    <div class="preview-icon bg-info">
                                        <i class="ti-user mx-0"></i>
                                    </div>
                                </div>
                                <div class="preview-item-content">
                                    <h6 class="preview-subject font-weight-normal">New user registration</h6>
                                    <p class="font-weight-light small-text mb-0 text-muted">
                                        2 days ago
                                    </p>
                                </div>
                            </a>
                        </div>
                    </li>
                    <li class="nav-item nav-profile dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
                            <i class="icon-head menu-icon"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right navbar-dropdown" aria-labelledby="profileDropdown">
                            <a class="drop-down ml-4 nav-link" data-toggle="modal" data-target="#profileModal" href="#ui-basic" aria-expanded="false" aria-controls="ui-basic">
                                <i class="ti-settings text-primary"></i>Profile
                            </a>
                            {% if request.session.user_nin %}
                            <a href="{% url 'logout' %}" class="dropdown-item">
                                <i class="ti-power-off text-primary"></i> Logout
                            </a>
                            {% endif %}
                        </div>
                    </li>
                    <li class="nav-item nav-settings d-none d-lg-flex">
                        <a class="nav-link" href="#">
                            <i class="icon-ellipsis"></i>
                        </a>
                    </li>
                </ul>
                <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
                        <span class="icon-menu"></span>
                    </button>
            </div>
        </nav>
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">

            {% include 'main/includes/header-content.html' %} {% include 'main/includes/sidebar.html' %}

            <!-- partial -->
            <div class="main-panel">
                <div class="content-wrapper">
                    <div class="row">
                        {% if messages %}
                        <div class="col-md-12 alert alert-success" role="alert">
                            {% for message in messages %}
                            <p>{{ message }}</p>
                            {% endfor %}
                        </div>
                        {% endif %}

                        <div class="col-md-12 grid-margin">
                            <div class="row">
                                <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                                    <h3 class="font-weight-bold">Welcome Dear Mother</h3>
                                    <h6 class="font-weight-normal mb-0">
                                        All systems are running smoothly! You have
                                        <span class="text-primary">3 unread alerts!</span>
                                    </h6>
                                </div>
                                <div class="col-12 col-xl-4">
                                    <div class="justify-content-end d-flex">
                                        <div class="dropdown flex-md-grow-1 flex-xl-grow-0">
                                            <button class="btn btn-sm btn-light bg-white dropdown-toggle" type="button" id="dropdownMenuDate2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                    <i class="mdi mdi-calendar"></i>
                                                    Today (10 Jan 2021)
                                                </button>
                                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuDate2">
                                                <a class="dropdown-item" href="#">January - March</a>
                                                <a class="dropdown-item" href="#">March - June</a>
                                                <a class="dropdown-item" href="#">June - August</a>
                                                <a class="dropdown-item" href="#">August - November</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 grid-margin stretch-card">
                            <div class="card tale-bg position-relative ctransparent">
                                <div class="card-people mt-auto">
                                    <div id="detailedReports" class="carousel slide detailed-report-carousel position-static pt-2" data-ride="carousel">
                                        <div class="carousel-inner">
                                            {% for week in weeks %}
                                            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                                <div class="text-center">
                                                    <h5>Week {{ week.week_number }}</h5>
                                                    <img src="{{ week.image.url }}" alt="Baby in womb" class="img-fluid mb-3" style="max-width: 50%; height: auto;">
                                                    <h5>Average Weight: {{ week.average_weight }} Kgs</h5>
                                                    <h5>Average Size: {{ week.average_size }} cm</h5>
                                                </div>
                                            </div>
                                            {% endfor %}
                                        </div>
                                        <a class="carousel-control-prev" href="#detailedReports" role="button" data-slide="prev">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                        <a class="carousel-control-next" href="#detailedReports" role="button" data-slide="next">
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Next</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 grid-margin stretch-card">
                            <div class="card tale-bg position-relative card-light-blue">
                                <div class="card-people mt-auto">
                                    <div id="detailedReports" class="carousel slide detailed-report-carousel position-static pt-2" data-ride="carousel">
                                        <div class="carousel-inner">
                                            {% for week in weeks %}
                                            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                                <div class="text-center">
                                                    <h5>Week {{ week.week_number }}</h5>
                                                    <img src="{{ week.image.url }}" alt="Baby in womb" class="img-fluid mb-3" style="max-width: 50%; height: auto;">
                                                    <h5>Average Weight: {{ week.average_weight }} Kgs</h5>
                                                    <h5>Average Size: {{ week.average_size }} cm</h5>
                                                </div>
                                            </div>
                                            {% endfor %}
                                        </div>
                                        <a class="carousel-control-prev" href="#detailedReports" role="button" data-slide="prev">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                        <a class="carousel-control-next" href="#detailedReports" role="button" data-slide="next">
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Next</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        {% if Categories %}
                        <div class="col-md-12 grid-margin transparent">
                            {% for category in Categories %}
                            <div class="col-md-12 alert alert-primary" role="alert">
                                <h4 class="card-title">{{ category.name }}</h4>
                            </div>
                            <div class="row">
                                {% for insight in category.insights.all %}
                                <div class="col-md-4 mb-4 stretch-card transparent">
                                    <!-- Trigger modal with insight-specific details -->
                                    <a href="" class="nav-link" data-toggle="modal" data-target="#insightModal{{ insight.id }}" aria-expanded="false" aria-controls="ui-basic">
                                        <div class="card card-tale">
                                            <div class="card-body mx-auto">
                                                <!-- Use Bootstrap class for image size and object-fit -->
                                                <img src="{{ insight.image.url }}" alt="Insight image" class="img-fluid mb-3 rounded mx-auto d-block" style="height: 200px; width: 200px; object-fit: cover;">
                                                <p class="mb-4">{{ insight.title }}</p>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <p class="col-12">No categories available.</p>
                        {% endif %}
                    </div>


                    <!-- profile.html -->
                    <h2>Pregnancy Details for {{ pregnancy_details.name }}</h2>

                    <ul>
                        <li>Mother's NIN: {{ pregnancy_details.nin }}</li>
                        <li>Baby's Sex: {{ pregnancy_details.baby_sex }}</li>
                        <li>Due Date Choice: {{ pregnancy_details.due_date_choice }}</li>
                        <li>Due Date: {{ pregnancy_details.due_date }}</li>
                        <li>First Child: {{ pregnancy_details.first_child }}</li>
                        <li>Age Group: {{ pregnancy_details.age_group }}</li>
                    </ul>

                    <!-- Optionally, include a button to allow the user to log out -->
                    <a href="{% url 'logout' %}" class="btn btn-danger">Log Out</a>



                </div>
                <!-- content-wrapper ends -->
                <!-- partial:partials/_footer.html -->
                <footer class="footer ">
                    <div class="d-sm-flex justify-content-center justify-content-sm-between ">
                        <span class="text-muted text-center text-sm-left d-block d-sm-inline-block ">
                                Copyright © 2021.  Premium
                                <a href="https://www.bootstrapdash.com/ " target="_blank ">Bootstrap admin template</a>
                                from BootstrapDash. All rights reserved.
                            </span>
                        <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center ">
                                Hand-crafted & made with
                                <i class="ti-heart text-danger ml-1 "></i>
                            </span>
                    </div>
                </footer>
                <!-- partial -->
            </div>
            <!-- main-panel ends -->
        </div>
        <!-- page-body-wrapper ends -->
    </div>
    <!-- modals here -->
    {% include 'main/modals/profile.html' %}{% include 'main/modals/insights.html' %}{% include 'main/modals/register-update.html' %}{% include 'main/modals/insight.html' %} {% include 'main/includes/footer.html' %}